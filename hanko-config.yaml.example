server:
  public:
    address: ":8000"
    cors:
      allow_origins:
        - "https://portal.hotosm.test"
        - "https://login.hotosm.test"
        - "https://dronetm.hotosm.test"
      allow_credentials: true
      unsafe_wildcard_origin_allowed: false

database:
  database: hanko
  user: hanko
  password: hanko
  host: hanko-db
  port: 5432

secrets:
  keys:
    - "abcdefghijklmnopqrstuvwxyz123456"  # Change this for production

service:
  name: "HOTOSM Portal (Dev)"

webauthn:
  enabled: false  # Passkeys disabled - using email/password + Google OAuth only
  relying_party:
    id: "hotosm.test"
    display_name: "HOTOSM Portal"
    origins:
      - "https://portal.hotosm.test"
      - "https://login.hotosm.test"
      - "https://dronetm.hotosm.test"

email:
  require_verification: true

passcode:
  enabled: true
  ttl: 300  # 5 minutes

password:
  enabled: true
  min_length: 8
  recovery: true

# SMTP settings - values injected by deploy workflow via sed
email_delivery:
  enabled: true
  smtp:
    host: "SMTP_HOST_PLACEHOLDER"
    port: 587
    user: "SMTP_USER_PLACEHOLDER"
    password: "SMTP_PASSWORD_PLACEHOLDER"
  from_address: "SMTP_FROM_PLACEHOLDER"
  from_name: "HOTOSM"

session:
  lifespan: 1h
  issuer: "https://login.hotosm.test"
  audience:
    - "https://portal.hotosm.test"
    - "https://login.hotosm.test"
    - "https://dronetm.hotosm.test"
  cookie:
    name: "hanko"
    domain: ".hotosm.test"  # .hotosm.test with dot enables cookie sharing across all *.hotosm.test subdomains
    http_only: true
    same_site: lax
    secure: true

third_party:
  redirect_url: "https://login.hotosm.test/thirdparty/callback"
  error_redirect_url: "https://login.hotosm.test/error"
  allowed_redirect_urls:
    - "https://portal.hotosm.test/**"
    - "https://login.hotosm.test/**"
    - "https://dronetm.hotosm.test/**"
  cookie:
    domain: ".hotosm.test"  # .hotosm.test with dot enables cookie sharing across all *.hotosm.test subdomains
    http_only: true
    same_site: lax
    secure: true
  providers:
    google:
      enabled: true
      client_id: "GOOGLE_CLIENT_ID_PLACEHOLDER"
      secret: "GOOGLE_CLIENT_SECRET_PLACEHOLDER"
      allow_linking: true
